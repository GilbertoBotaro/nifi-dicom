# Design of Box upload service

## Status

accepted

## Context

[Box](https://www.box.com) is cloud data storage platform.  The `nifi-dicom` project desires the ability to upload `FlowFiles` to Box.  This feature is not limited to DICOM, and is independent of DICOM.

## Decision

The Box upload feature will include these components:

### Box Controller

A [Nifi controller](https://nifi.apache.org/docs/nifi-docs/html/user-guide.html#Controller_Services) to provide a [Box API](https://developer.box.com/reference) object.  The API object will be for a particular manage user account.

* `UserID`: the managed user ID
* `APIKey`: time-limited API key from Box, mainly for testing
* `AppSettings`: a JSON file containing the application configuration settings, generated by Box.  Specific for the application


### PutBox

Following the Nifi conventions, the [Processor](https://nifi.apache.org/docs/nifi-docs/html/user-guide.html#building-dataflow) will be named `PutBox` and will use the Box Controller Service to obtain the Box API object.  Files will be uploaded to Box.  `PutBox` will have the following `Properties`:

* `Directory`: name of the parent Box directory where `FlowFiles` will be stored.  The final filename is constructed by concatenation of the `Directory` with the `filename` Attribute of the `FlowFile`

## Consequences

N/A
